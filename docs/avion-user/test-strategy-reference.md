# avion-user テスト戦略

## 共通テスト戦略の適用

このサービスでは、[共通テスト戦略](../common/testing-strategy.md)に従ってテストを実装します。

### テスト方針
- **TDD必須**: インターフェース定義 → テスト作成 → 実装の順序を厳守
- **カバレッジ目標**: ユニットテスト85%以上、クリティカルパス95%以上
- **テーブル駆動テスト**: 全テストで必須
- **モック生成**: `go.uber.org/mock/gomock`使用

### サービス固有のテスト要件

#### ドメインロジックテスト重点項目
- プロフィール更新の検証ロジック
- フォロー/フォロワー関係の整合性
- ブロック/ミュート状態の遷移
- プライバシー設定の継承

#### 統合テスト重点項目
- 大規模フォロワーリストの取得性能
- プロフィール更新のイベント発行
- 他サービスとの連携（avion-drop, avion-notification）
- キャッシュ整合性の検証

#### パフォーマンステスト
- フォロワー数10万件でのクエリ性能
- プロフィール取得: p50 < 50ms
- フォロー操作: p50 < 100ms
- バッチ更新の並行性能

詳細は[共通テスト戦略ドキュメント](../common/testing-strategy.md)を参照してください。