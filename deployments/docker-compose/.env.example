# ============================================================================
# Avion Docker Compose Environment Variables
# ============================================================================
# Copy this file to .env and configure with your values
# DO NOT COMMIT the .env file to version control
# ============================================================================

# ----------------------------------------------------------------------------
# PostgreSQL Configuration
# ----------------------------------------------------------------------------
POSTGRES_USER=avion
POSTGRES_PASSWORD=avion_dev
POSTGRES_DB=avion
POSTGRES_PORT=5432
POSTGRES_MAX_CONNECTIONS=200

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_MEMORY=512mb
REDIS_EVICTION_POLICY=allkeys-lru
REDIS_PERSISTENCE=yes
REDIS_FSYNC=everysec

# ----------------------------------------------------------------------------
# MeiliSearch Configuration
# ----------------------------------------------------------------------------
MEILISEARCH_PORT=7700
MEILISEARCH_MASTER_KEY=development_master_key_must_be_at_least_16_bytes
MEILISEARCH_ENV=development
MEILISEARCH_NO_ANALYTICS=true
MEILISEARCH_LOG_LEVEL=INFO

# ----------------------------------------------------------------------------
# MinIO (S3-compatible storage) Configuration
# ----------------------------------------------------------------------------
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_DEFAULT_BUCKETS=avion-media:public,avion-backup:private

# ----------------------------------------------------------------------------
# Observability Configuration
# ----------------------------------------------------------------------------
# Jaeger
JAEGER_UI_PORT=16686
JAEGER_COLLECTOR_PORT=14268
JAEGER_OTLP_GRPC_PORT=4317
JAEGER_OTLP_HTTP_PORT=4318

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_PLUGINS=

# ----------------------------------------------------------------------------
# Service Ports Configuration
# ----------------------------------------------------------------------------
# avion-gateway
GATEWAY_HTTP_PORT=8080
GATEWAY_GRPC_PORT=9090

# avion-auth
AUTH_HTTP_PORT=8081
AUTH_GRPC_PORT=9091

# avion-user
USER_HTTP_PORT=8082
USER_GRPC_PORT=9092

# avion-drop
DROP_HTTP_PORT=8083
DROP_GRPC_PORT=9093

# avion-timeline
TIMELINE_HTTP_PORT=8084
TIMELINE_GRPC_PORT=9094

# avion-activitypub
ACTIVITYPUB_HTTP_PORT=8085
ACTIVITYPUB_GRPC_PORT=9095

# avion-notification
NOTIFICATION_HTTP_PORT=8086
NOTIFICATION_GRPC_PORT=9096

# avion-media
MEDIA_HTTP_PORT=8087
MEDIA_GRPC_PORT=9097

# avion-search
SEARCH_HTTP_PORT=8088
SEARCH_GRPC_PORT=9098

# avion-system-admin
SYSTEM_ADMIN_HTTP_PORT=8089
SYSTEM_ADMIN_GRPC_PORT=9099

# avion-moderation
MODERATION_HTTP_PORT=8090
MODERATION_GRPC_PORT=9100

# avion-community
COMMUNITY_HTTP_PORT=8091
COMMUNITY_GRPC_PORT=9101

# avion-message
MESSAGE_HTTP_PORT=8092
MESSAGE_GRPC_PORT=9102

# ----------------------------------------------------------------------------
# Development Tools Configuration
# ----------------------------------------------------------------------------
# Redis Commander
REDIS_COMMANDER_PORT=8181
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------
# Logging
LOG_LEVEL=debug

# Session
SESSION_SECRET=development_session_secret_must_be_at_least_32_bytes

# OAuth Providers (optional)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ----------------------------------------------------------------------------
# Notes
# ----------------------------------------------------------------------------
# 1. All passwords should be changed for production environments
# 2. Use strong, randomly generated passwords for production
# 3. Consider using Docker secrets or external secret management for production
# 4. Ensure MEILISEARCH_MASTER_KEY is at least 16 bytes and secure
# 5. SESSION_SECRET should be at least 32 bytes for security
# ----------------------------------------------------------------------------